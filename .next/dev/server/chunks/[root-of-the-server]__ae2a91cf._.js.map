{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/huyixi/i/font-subsetter/lib/presetCharsets.ts"],"sourcesContent":["export type PresetCharsetId = \"digits\" | \"latin\" | \"cn-3500\" | \"cn-7000\";\n\nexport interface PresetCharsetMeta {\n  id: PresetCharsetId;\n  label: string;\n  sizeHint: number;\n  type: \"inline\" | \"remote\";\n  path?: string;\n}\n\nexport const PRESET_CHARSET_META: PresetCharsetMeta[] = [\n  {\n    id: \"cn-3500\",\n    label: \"常用汉字 3500\",\n    sizeHint: 3500,\n    type: \"remote\",\n    path: \"/charsets/cn-3500.txt\",\n  },\n  {\n    id: \"cn-7000\",\n    label: \"常用汉字 7000\",\n    sizeHint: 7000,\n    type: \"remote\",\n    path: \"/charsets/cn-7000.txt\",\n  },\n  {\n    id: \"digits\",\n    label: \"数字 0-9\",\n    sizeHint: 10,\n    type: \"inline\",\n  },\n  {\n    id: \"latin\",\n    label: \"英文 A-Z a-z\",\n    sizeHint: 52,\n    type: \"inline\",\n  },\n];\n\nexport const inlineCharsetMap: Record<PresetCharsetId, string | undefined> = {\n  digits: \"0123456789\",\n  latin: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  \"cn-3500\": undefined,\n  \"cn-7000\": undefined,\n};\n\nexport function isPresetCharsetId(value: string): value is PresetCharsetId {\n  return PRESET_CHARSET_META.some((preset) => preset.id === value);\n}\n"],"names":[],"mappings":";;;;;;;;AAUO,MAAM,sBAA2C;IACtD;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;IACR;CACD;AAEM,MAAM,mBAAgE;IAC3E,QAAQ;IACR,OAAO;IACP,WAAW;IACX,WAAW;AACb;AAEO,SAAS,kBAAkB,KAAa;IAC7C,OAAO,oBAAoB,IAAI,CAAC,CAAC,SAAW,OAAO,EAAE,KAAK;AAC5D"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/huyixi/i/font-subsetter/lib/presetCharsetService.ts"],"sourcesContent":["import { promises as fs } from 'node:fs'\nimport path from 'node:path'\nimport {\n  PRESET_CHARSET_META,\n  inlineCharsetMap,\n  type PresetCharsetId,\n  type PresetCharsetMeta,\n} from './presetCharsets'\n\ninterface LoadPresetCharsetOptions {\n  baseUrl?: string\n}\n\nconst isHttpUrl = (value: string) => value.startsWith('http://') || value.startsWith('https://')\n\nasync function fetchCharset(id: PresetCharsetId, url: string): Promise<string | null> {\n  try {\n    const response = await fetch(url)\n    if (!response.ok) {\n      console.error(\n        `Failed to fetch charset file for ${id} from ${url}: ${response.status} ${response.statusText}`,\n      )\n      return null\n    }\n    const content = await response.text()\n    return content.trim()\n  } catch (error) {\n    console.error(`Failed to fetch charset file for ${id} from ${url}:`, error)\n    return null\n  }\n}\n\nexport function getPresetMetadata(): PresetCharsetMeta[] {\n  return PRESET_CHARSET_META\n}\n\nexport async function loadPresetCharset(\n  id: PresetCharsetId,\n  options: LoadPresetCharsetOptions = {},\n): Promise<string | null> {\n  const inlineCharset = inlineCharsetMap[id]\n  if (inlineCharset) {\n    return inlineCharset\n  }\n\n  const meta = PRESET_CHARSET_META.find((item) => item.id === id)\n  if (!meta || meta.type !== 'remote' || !meta.path) {\n    return null\n  }\n\n  if (isHttpUrl(meta.path)) {\n    return fetchCharset(id, meta.path)\n  }\n\n  const normalizedPath = meta.path.startsWith('/') ? meta.path : `/${meta.path}`\n  const relativePath = normalizedPath.slice(1)\n  const filePath = path.join(process.cwd(), 'public', relativePath)\n\n  try {\n    const content = await fs.readFile(filePath, 'utf8')\n    return content.trim()\n  } catch (error) {\n    if (options.baseUrl) {\n      const fallbackUrl = new URL(normalizedPath, options.baseUrl).toString()\n      const remoteContent = await fetchCharset(id, fallbackUrl)\n      if (remoteContent) {\n        return remoteContent\n      }\n    }\n\n    console.error(`Failed to load charset file for ${id}:`, error)\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAWA,MAAM,YAAY,CAAC,QAAkB,MAAM,UAAU,CAAC,cAAc,MAAM,UAAU,CAAC;AAErF,eAAe,aAAa,EAAmB,EAAE,GAAW;IAC1D,IAAI;QACF,MAAM,WAAW,MAAM,MAAM;QAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CACX,CAAC,iCAAiC,EAAE,GAAG,MAAM,EAAE,IAAI,EAAE,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;YAEjG,OAAO;QACT;QACA,MAAM,UAAU,MAAM,SAAS,IAAI;QACnC,OAAO,QAAQ,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,EAAE;QACrE,OAAO;IACT;AACF;AAEO,SAAS;IACd,OAAO,8IAAmB;AAC5B;AAEO,eAAe,kBACpB,EAAmB,EACnB,UAAoC,CAAC,CAAC;IAEtC,MAAM,gBAAgB,2IAAgB,CAAC,GAAG;IAC1C,IAAI,eAAe;QACjB,OAAO;IACT;IAEA,MAAM,OAAO,8IAAmB,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IAC5D,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,YAAY,CAAC,KAAK,IAAI,EAAE;QACjD,OAAO;IACT;IAEA,IAAI,UAAU,KAAK,IAAI,GAAG;QACxB,OAAO,aAAa,IAAI,KAAK,IAAI;IACnC;IAEA,MAAM,iBAAiB,KAAK,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,IAAI,GAAG,CAAC,CAAC,EAAE,KAAK,IAAI,EAAE;IAC9E,MAAM,eAAe,eAAe,KAAK,CAAC;IAC1C,MAAM,WAAW,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;IAEpD,IAAI;QACF,MAAM,UAAU,MAAM,yHAAE,CAAC,QAAQ,CAAC,UAAU;QAC5C,OAAO,QAAQ,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,IAAI,QAAQ,OAAO,EAAE;YACnB,MAAM,cAAc,IAAI,IAAI,gBAAgB,QAAQ,OAAO,EAAE,QAAQ;YACrE,MAAM,gBAAgB,MAAM,aAAa,IAAI;YAC7C,IAAI,eAAe;gBACjB,OAAO;YACT;QACF;QAEA,QAAQ,KAAK,CAAC,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC,EAAE;QACxD,OAAO;IACT;AACF"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/huyixi/i/font-subsetter/app/api/presets/%5BpresetId%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { loadPresetCharset } from '@/lib/presetCharsetService'\nimport { isPresetCharsetId } from '@/lib/presetCharsets'\n\nexport const runtime = 'nodejs'\n\ninterface RouteContext {\n  params: Promise<{\n    presetId: string\n  }>\n}\n\nexport async function GET(request: Request, context: RouteContext) {\n  const { presetId } = await context.params\n\n  if (!isPresetCharsetId(presetId)) {\n    return NextResponse.json({ error: 'Preset not found' }, { status: 404 })\n  }\n\n  const baseUrl = new URL(request.url).origin\n  const characters = await loadPresetCharset(presetId, { baseUrl })\n\n  if (characters === null) {\n    return NextResponse.json({ error: 'Preset not found' }, { status: 404 })\n  }\n\n  return NextResponse.json({ id: presetId, characters, count: characters.length })\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,UAAU;AAQhB,eAAe,IAAI,OAAgB,EAAE,OAAqB;IAC/D,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,MAAM;IAEzC,IAAI,CAAC,IAAA,4IAAiB,EAAC,WAAW;QAChC,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,MAAM,UAAU,IAAI,IAAI,QAAQ,GAAG,EAAE,MAAM;IAC3C,MAAM,aAAa,MAAM,IAAA,kJAAiB,EAAC,UAAU;QAAE;IAAQ;IAE/D,IAAI,eAAe,MAAM;QACvB,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAU;QAAY,OAAO,WAAW,MAAM;IAAC;AAChF"}}]
}